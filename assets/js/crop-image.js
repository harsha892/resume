/*! minified version file */

var basic=$(".main-cropper").croppie({viewport:{width:150,height:150,type:"circle"},boundary:{width:150,height:150},enforceBoundary:!0,enableExif:!0});function readFile2(e){var t=e.files[0],a=Math.round(t.size/1024),r=t.type.split("/")[1];if("png"==r||"jpg"==r||"PNG"==r||"jpeg"==r)if(a<2048){if(e.files&&e.files[0]){var o=new FileReader;o.onload=function(e){console.log(basic,$(basic)),basic.croppie("bind",{url:e.target.result,zoom:0}).then(function(){$(".cr-slider").attr({step:.2,min:.2,max:1.8}),$(".cr-slider").val("0.9").attr("aria-valuenow","0.9"),$(".cr-image").css({transform:"translate3d(0px, 0px, 0px) scale(1)"})}),setTimeout(function(){$("#myModelUploadPhoto").modal("show")},500)},o.readAsDataURL(e.files[0])}}else $("#newErrorMessageID .message-text").html("Size exceeded. Max 2MB"),$("#newErrorMessageID").fadeIn().delay(3e3).fadeOut("slow",function(){});else $("#newErrorMessageID .message-text").html("Image format not supported. Please upload JPG/JPEG/PNG formats."),$("#newErrorMessageID").fadeIn().delay(3e3)}function saveUserPicture(e){var t=new FormData;t.append("userId",userId),t.append("type","photo"),t.append("order_id",0),t.append("file",e,userId+".jpg"),console.log(apiUrl+"/uploadFile",t),doUpload(apiUrl+"/uploadFile",t).then(function(e){console.log(e),"success"==e.status&&(localStorage.setItem(btoa("imageStore"),btoa(e.data.pic)),isProfilePictureUpdated=!0,"/app/editor/index.html"==window.location.pathname&&(isProfilePictureUpdated=!0,resumeObj.pic=e.data.httpPath,localStorage.setItem(encrypt("userData",sessionId),encrypt(JSON.stringify(resumeObj),sessionId))),console.log(e.data.httpPath),localStorage.setItem("isServiceActionRequired","true"),$("#profileMenu img").attr("src",e.data.httpPath),$("#profilePicEdit").attr("src",e.data.httpPath),$("#pimage-preview").attr("src",e.data.httpPath),$("#pimage-preview2").css("background","url("+e.data.httpPath+") center center"),$("#image-preview2").css("opacity",0),$("#user_pic").attr("src",e.data.httpPath),$("#myModelUploadPhoto").modal("hide"))})}function b64toBlob(e,t,a){t=t||"",a=a||512;for(var r=atob(e),o=[],i=0;i<r.length;i+=a){for(var s=r.slice(i,i+a),n=new Array(s.length),l=0;l<s.length;l++)n[l]=s.charCodeAt(l);var p=new Uint8Array(n);o.push(p)}return new Blob(o,{type:t})}$(".actionUpload").on("change",function(){readFile2(this)}),$("#showResult").click(function(){basic.croppie("result",{type:"blob",size:"viewport",format:"webp",quality:1,circle:!0}).then(function(e){console.log("croppie html",e),$("#result").attr("src",e),saveUserPicture(e)})});