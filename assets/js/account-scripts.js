/*! minified version file */

if("https://devresume.workruit.com"==window.location.origin)var shareSourceUrl="https://dev.workruit.com/#",shareSourceUrl2="https://dev.workruit.com/#";else if("https://stageresume.workruit.com"==window.location.origin)shareSourceUrl="https://stage.workruit.com/#",shareSourceUrl2="https://stage.workruit.com/#";else if("https://resume.workruit.com"==window.location.origin)shareSourceUrl="https://www.workruit.com/#",shareSourceUrl2="https://www.workruit.com/#";else shareSourceUrl="https://resue.workruit.com/#",shareSourceUrl2="https://dev.workruit.com/#";var localUserData,userProfileData,userInfo;function getUserProfile(){doGetWithEncrypt(apiUrl+"/user/"+getUserId()+"/getResumeAccountInfo").then(e=>{console.log("doGetWithEncrypt",e),userProfileData=localUserData=userInfo=userData=e.data;var a=localUserData.emailVerified;localStorage.setItem(btoa("userTemplate"),btoa(userProfileData.template)),localStorage.setItem("isServiceActionRequired","false"),localStorage.setItem(btoa("userPlanInfo"),btoa(JSON.stringify(userProfileData.planDetails))),0===a?$("#newSuccessMessageID").css("display","none"):$(".preview_btn").css("display","block"),bindDashboardData(),statusRibbon(),localStorage.removeItem("newTemplate"),"/app/dashboard/account.html"==window.location.pathname?bindAccountFormData(localUserData):"/app/order/cart.html"==window.location.pathname?priceCalculationAction(localUserData):"/app/dashboard/share.html"==window.location.pathname?userShareActionInfo(localUserData):"/app/dashboard/o-history.html"==window.location.pathname?loadOrderPage(localUserData):"/app/payment/pending.html"==window.location.pathname||"/app/payment/failed.html"==window.location.pathname||"/app/payment/success.html"==window.location.pathname?getOrderStatus():"/app/dashboard/templates.html"==window.location.pathname||"/templates.html"==window.location.pathname?(console.log("localUserData",localUserData),loadDashboardTemplates(localUserData)):"/app/dashboard/coverletters.html"!=window.location.pathname&&"/coverletters.html"!=window.location.pathname||(console.log("localUserData",localUserData),loadDashboardTemplates(localUserData)),e.data.planDetails.emailVerified&&!e.data.httpPath&&renderEditor(e.data.template),"/app/dashboard/home.html"==window.location.pathname&&setInfoMessage(e.data.planDetails.msg.description,e.data.planDetails.emailVerified),$("#load-header").load("../includes/user-header.html"),$("#load-header").load("../includes/user-header.html",function(){web_version!=e.data.user_web_version&&getWebVersion()!=web_version&&($("#refreshPopUp").removeClass("d-none"),$(".refresh_button").attr("data-version",e.data.user_web_version))}),$(".loading-container").delay(1e3).fadeOut()})}function loadDegrees(){doGetWithAuthKey(apiAdminUrl+"/allDegrees").then(function(e){console.log("allDegrees response",e),localStorage.setItem(btoa("allDegrees"),btoa(JSON.stringify(e.degrees)))}),doGetWithAuthKey(apiAdminUrl+"/allJobFunctions").then(function(e){console.log("allDegrees response",e),localStorage.setItem(btoa("allJobFunctions"),btoa(JSON.stringify(e.jobFunctions)))})}function setInfoMessage(e,a){if(a){if($("#mail_message").remove(),!$("#info_message span").length)return void requestAnimationFrame(function(){setInfoMessage(e)});const a=JSON.parse(e.match(/\d+/))?JSON.parse(e.match(/\d+/)[0]):null;console.log(!e.indexOf("2 days"),!e.indexOf("1 day"),e.indexOf("today"),"today",a),a&&a<=3||-1!==e.split(".")[0].indexOf("today")?$("#info_message").addClass("alert-danger"):e.indexOf("Your free plan is expired.")&&e.indexOf("Please subscribe")&&e.indexOf("Your plan expired")&&e.indexOf("Your plan is expired.")?$("#info_message").addClass("alert-success"):$("#info_message").addClass("alert-danger open_pricing_modal cursor-pointer"),$("#info_message span").html(e)}else{if(!$("#mail_message span").length)return void requestAnimationFrame(function(){setInfoMessage(e)});$("#info_message span").html(messages.emailVerified),$("#info_message").addClass("alert-danger"),$("#info_message .close").remove()}localUserData&&(console.log("userInfo.planDetails.subscribedUser",localUserData.planDetails,localUserData.planDetails.subscribedUser),localUserData.planDetails.subscribedUser?$("#shareNavItem a").attr("data-toggle","").attr("data-target","").attr("href",location.origin+"/app/dashboard/share.html"):$("#shareNavItem a").attr("data-toggle","modal").attr("data-target","#upgrade"),localUserData.planDetails.emailVerified&&$("#mail_message").remove())}function bindDashboardData(){$("#userName").text(localUserData.firstname+" "+localUserData.lastname),$("#UserEmail").text(text_truncate(localUserData.email,30)),$('input[name="firstname"]').val(localUserData.firstname),$('input[name="lastname"]').val(localUserData.lastname),$('input[name="email"]').val(localUserData.email),$('input[name="shareName"]').val(localUserData.share_name),$("#copyText,#copyText2").val(shareSourceUrl2+localUserData.share_name),localUserData.pic?imageExists(localUserData.pic)?($("#profileMenu img").attr("src",localUserData.pic),$("#profilePicEdit").attr("src",""),$("#profilePicEdit").attr("src",localUserData.pic)):($("#profileMenu img").attr("src",window.location.origin+"/assets/images/avatar.png"),$("#profilePicEdit").attr("src",window.location.origin+"/assets/images/avatar.png")):($("#profileMenu img").attr("src",window.location.origin+"/assets/images/resume/svg/user.svg"),$("#profilePicEdit").attr("src",window.location.origin+"/assets/images/resume/svg/user.svg")),localUserData.lastUpdatedDate?($("#lastUpdated").text(localUserData.lastUpdatedDate),$("#lastUpdatedTemplate").text(localUserData.lastUpdatedDate),$("#lastUpdatedcoverletter").text(localUserData.lastUpdatedDate),$("#createResumeContainer").hide(),$("#updateResumeContainer").show()):($("#updateResumeContainer").hide(),$("#createResumeContainer").show(),localStorage.setItem("newUser","true")),userProfileData.planDetails.subscribedUser&&1!==userProfileData.planDetails.planId&&setTimeout(function(){$(".plan_info_text").text("Extend premium services to retain access to all premium features in advance."),$("#header-upgrade-btn").text("Renew")},500)}function statusRibbon(){$("#info_message span").html(userProfileData.planDetails.msg.description),userProfileData.planDetails.subscribedUser?($("#shareNavItem a").attr("data-toggle","").attr("data-target","").attr("href",location.origin+"/app/dashboard/share.html"),$("#user_plan_info_msg").text(userProfileData.planDetails.planId+userProfileData.planDetails.msg.description)):$("#shareNavItem a").attr("data-toggle","modal").attr("data-target","#upgrade"),userProfileData.pic?$("#profileMenu img").attr("src",userProfileData.pic):$("#profileMenu img").attr("src",location.origin+"/assets/images/avatar.png"),userProfileData.edit_name&&($(".edit_name").addClass("d-none"),$("#shareDomain2").val(shareSourceUrl+userProfileData.share_name),$(".edit_name_link").removeClass("d-none"))}function alphanumeric(e){return!!e.match(/^[0-9a-zA-Z]+$/)}function text_truncate(e,a,t){return null==a&&(a=100),null==t&&(t="..."),e.length>a?e.substring(0,a-t.length)+t:e}function renderEditor(e){var a;a="https://devresume.workruit.com"==window.location.origin?"https://devresume.workruit.com":"https://stageresume.workruit.com"==window.location.origin?"https://stageresume.workruit.com":"https://devresume.workruit.com",$("#render_editor").load(window.location.origin+"/app/editor/wir-templates/template-1.html #wrap",function(t,r,s){if("error"==r){$("#error").html("Sorry but there was an error: "+s.status+" "+s.statusText)}$("#render_editor page,#render_editor .resume-container").removeClass("theme-blue").addClass("theme-green"),$('.resume-container [data-content="firstname"]').text(localUserData.firstname),$('.resume-container [data-content="lastname"]').text(localUserData.lastname),$('.resume-container [data-content="email"]').text(localUserData.email),$(".resume-container .user_info.gender-box .gender").remove(),$(".resume-container .user_info.gender .gender-para").removeClass("d-none"),userProfileData.pic?$(".resume-container #user_pic").attr("src",userProfileData.pic):$(".resume-container #user_pic").attr("src",a+"/assets/images/avatar.png"),$("[contenteditable]").each(function(){var e=$(this);e.text().trim().length||e.empty()}),$(".gender-para").removeClass("d-none"),$(".rating-container .rating-circle:first-child").addClass("rating-chosen"),$(".rating-container .rating-circle:nth-child(2)").addClass("rating-chosen"),$(".social_icon").each(function(){var e=$(this).attr("src").split("../../../"),t=a+"/"+e[1];$(this).attr("src",t)});var o="75%";for(let e=1;e<2;e++){var i=$('#render_editor [id^="skills_item_"]:last'),n=parseInt(i.prop("id").match(/\d+/g),10)+1,l=i.clone().prop("id","skills_item_"+n);i.after(l);o="75%";$("#render_editor #skills_item_"+n+" .skills-bar .skill-value").attr("data-skill",o),$("#render_editor #skills_item_"+n+" .skills-bar .skill-value").text(o),$("#render_editor #skills_item_"+n+" .skills-bar").attr("data-border","75"),$("#render_editor #skills_item_"+n+" .skills-bar").attr("class","").attr("class","skills-bar color-blue at-75"),$("#render_editor #skills_item_"+n+" .skill").attr("data-content","").text("")}var c=new FormData,d=new Blob([getHtmlForUpload(e)]);c.append("type","html"),c.append("userId",localUserData.userId),c.append("order_id",0),c.append("file",d,localUserData.userId+"_preview.html"),doUpload(apiUrl+"/uploadFile",c).then(e=>{if(console.log(e),"success"==e.status){console.log(":::::::::: hey i am happy with this");e.data.httpPath;$(".gender-para").addClass("d-none")}})})}function imageExists(e){return!0}!function(e){e.fn.paraCount=function(a){return this.each(function(){var t=new function(){return{options:{itemClass:"awesome",baseUrl:window.location.origin,apiUrl:baseUrl,navPath:"",callMe:function(){console.log("ring, ring...")}},init:function(a,t){this.options=e.extend(this.options,a),this.elem=t,this.attachEvents()},attachEvents:function(){var a=this;atob(localStorage.getItem(btoa("sessionId_"+window.location.origin)))?(getUserProfile(),getAllDegrees()&&getJobFunctionsArray()||loadDegrees()):window.location.href="../index.html",e("#changePassBtn").on("click",function(){e("#changePasswordForm").removeClass("d-none"),e("#changePassBtn").addClass("d-none")}),e("#cancelBtn").on("click",function(){e('input[name="oldPassword"]').val(""),e('input[name="newPassword"]').val(""),e('input[name="reenterNewPassword"]').val(""),e("#changePasswordForm").addClass("d-none"),e("#changePassBtn").removeClass("d-none")}),e("#profileMenu").on("click",function(){}),e("input.myprofile").on("focus",function(a){e("#updateProfile").fadeIn()}),e("select.myprofile").on("focus",function(a){e("#updateProfile2").fadeIn()}),e("#saveProfilePic").on("click",function(){a.saveUserPic()})},saveUserPic:function(){var a=new FormData,t=e('input[name="pic"]').get(0).files[0],r=getUserId();console.log("saveUserPic",localUserData),a.append("userId",r),a.append("order_id",0),a.append("type","photo"),a.append("file",t),doUpload(baseApiUrl+serviceUrls.post.uploadFile,a).then(a=>{console.log(a),"success"==a.status?(localUserData.pic=a.data.httpPath,localStorage.setItem(btoa("imageStore"),btoa(a.data.pic)),getUserProfile(),e("#profileMenu img").attr("src",a.data.httpPath),localStorage.setItem(encrypt("userData",sessionId),encrypt(JSON.stringify(localUserData),sessionId)),console.log("response.data.httpPath",a.data.httpPath),e("#profilePicEdit").attr("src",a.data.httpPath),e("#myModelUploadPhoto").modal("hide")):e('<div class="invalid-feedback">'+a.msg.description+"</div>").insertAfter$("#select-pic-section")})}}};t.init(a,this),e(this).data("paraCount",t)})}}(jQuery),window.addEventListener("message",function(e){e.data&&"CLOSE__MODAL"===e.data.type&&$(".modal").modal("hide")}),$("body").on("click",".open_pricing_modal",function(){$("#pricing-modal .pricing_template").empty(),getResumePlans(userProfileData),setTimeout(function(){$("#pricing-modal").modal({backdrop:!0}),$("#pricing-modal").show()},500)});