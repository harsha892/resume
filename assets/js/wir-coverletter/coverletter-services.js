/*! minified version file */

var updatedUserObj,isJobFunctionUpDated;function saveUserProfile(e,t){console.log("CoverLetter Data",e);"back"==t||"changeTemplate"==t?planInfo.subscribedUser&&planInfo.validUser||!planInfo.subscribedUser&&!planInfo.planId?($("#unsaved_changes").modal("show").css("z-index","99999"),$(".save_new_changes").on("click",function(){$(".editorNav li,  .previewNav li").addClass("inactive-link"),$("#newSuccessMessageID .message-text").html("Please wait while we saved your changes in the cover letter.").css("text-align","center"),$("#newSuccessMessageID").css("text-align","center"),saveUserData(e,t),$("#newSuccessMessageID").fadeIn().delay(4e3).fadeOut("slow"),$("#unsaved_changes").modal("hide")}),$(".cancel_new_changes").on("click",function(){"back"==t&&loadPage("#/home",!0,"wirw_editor_back"),"changeTemplate"==t&&loadPage("app/dashboard/coverletters.html",!0,"wirw_editor_template"),$("#unsaved_changes").modal("hide")})):!planInfo.validUser&&planInfo.subscribedUser&&("back"==t&&loadPage("#/home",!0,"wirw_editor_back"),"changeTemplate"==t&&loadPage("app/dashboard/coverletters.html",!0,"wirw_editor_template")):saveUserData(e,t)}function saveUserData(e,t){var a={user_id:getUserId(),cover_letter:JSON.stringify(e)};console.log("action:::::",apiUrl+"/user/"+getUserId()+"/updateResumeCoverLetter",a),doPostWithOutEncrypt(apiUrl+"/updateResumeCoverLetter",a).then(a=>{console.log("updateProfileResume response",a),$(".resume-preview").addClass("d-none"),analytics.logEvent("wirw_savecoverletter"),"Updated successfully!"==a.status?(resumePreviewUrl=null,resumePreviewUrl=a.data.resumeUrl,downloadPdfUrl=resumePreviewUrl,isUserProfileSaved=!0,updatedUserObj=a.data,newResumeObj=JSON.parse(JSON.stringify(a.data)),localStorage.setItem("isServiceActionRequired","true"),isProfilePictureUpdated=!1,$(".loading-container").fadeOut(),"newUser"===t&&localStorage.removeItem("newUser"),"save"===t&&($("#newSuccessMessageID .message-text").html(a.msg.title),$("#saveResume img").attr("src","../../../assets/images/resume/eva-svg/save.svg"),$(".resume-preview").addClass("d-none"),$(".url_link").each(function(e){var t=$(this).text();validURL(t)&&(-1!=t.search("https://")?$(this).attr("href",$(this).text()).attr("target","_blank").attr("contenteditable","true"):$(this).attr("href","https://"+t).attr("target","_blank").attr("contenteditable","true"))}),$("#newSuccessMessageID").fadeIn().delay(4e3).fadeOut("slow",function(){$("#saveResume").removeAttr("pointer-events"),$(".editorNav li,  .previewNav li").removeClass("inactive-link")})),"back"==t&&loadPage("#home",!0,"wirw_editor_back"),"changeTemplate"==t&&loadPage("app/dashboard/coverletters.html",!0,"wirw_editor_template"),"download"===t&&downloadResumeAction(downloadUrl,e.firstname),localStorage.setItem(encrypt("userData",sessionId),encrypt(JSON.stringify(a.data),sessionId))):($(".loading-container").fadeOut(),$("#newErrorMessageID .message-text").html("Something went wrong please try again"),$("#newErrorMessageID").fadeIn().delay(2e3).fadeOut("slow",function(){$("#saveResume").removeAttr("pointer-events")}),"save"===t&&($("#saveResume img").attr("src","../../../assets/images/resume/eva-svg/save.svg"),$(".editorNav li,  .previewNav li").removeClass("inactive-link"),$(".resume-preview").addClass("d-none"),$(".url_link").each(function(e){var t=$(this).text();validURL(t)&&(-1!=t.search("https://")?$(this).attr("href",$(this).text()).attr("target","_blank").attr("contenteditable","true"):$(this).attr("href","https://"+t).attr("target","_blank").attr("contenteditable","true"))})),"preview"==t&&($("#previewResume img").attr("src","../../../assets/images/resume/view-icon.png"),$(".editorNav li,  .previewNav li").removeClass("inactive-link"),$(".resume-preview").addClass("d-none"),$("#previewResume").removeClass("d-none"),$("#previewBack").addClass("d-none"),$(".editorNav").removeClass("d-none"),$("#saveResume").removeClass("d-none"),$(".editor-preview").addClass("d-none"),$("#resume-body").removeClass("d-none"),$("#previewResume").removeClass("inactive-link"),$("#downloadResume").removeClass("in-preview"),$(".resume-preview").addClass("d-none"),$(".editor-preview canvas").remove()),"download"===t&&($(".editorNav li,  .previewNav li").removeClass("inactive-link"),$("#downloadResume img").attr("src","../../../assets/images/resume/eva-svg/cloud-download.svg"),$(".resume-preview").addClass("d-none")))})}function getShareNameFile(){var e=resumeObj.share_name,t={async:!0,crossDomain:!0,url:apiUrl+"/user/getShareFile?name="+e,type:"GET",headers:{token:"911ca088ab824095b82d3c98b32332e7","cache-control":"no-cache"}};$.ajax(t).done(function(e){})}function skillsAutoComplete(){$(".skills").on("keyup",function(e){var t=$(this).attr("data-is-initialized"),a=$(this).text(),r=(new Array,$(this));r.autocomplete({source:function(e,t){t($.ui.autocomplete.filter(skillsLocalArray,e.term).slice(0,15))},minLength:0,function:(e,t)=>($(".skills").val(t.item.label),!1)}),"false"==t&&(r.autocomplete("search",a),r.attr("data-is-initialized","true"))})}let degreesAll=[];var jobFunctionsAll=new Array;$.each(JSON.parse(getJobFunctionsArray()),function(e,t){jobFunctionsAll.push({value:t.value,id:t.id})}),$("#allJobFunctions").autocomplete({minLength:0,source:function(e,t){var a=$.ui.autocomplete.filter(jobFunctionsAll,e.term);t(a.slice(0,10)),a.length<=0&&$("#allJobFunctions").attr("data-item-id","")},select:function(e,t){console.log(t.item),$("#allJobFunctions").attr("data-item-id",t.item.id)}});var localDegrees=JSON.parse(getAllDegrees());function degreesAutoComplete(){$(".degrees").autocomplete({source:jobFunctionsAll,minLength:0,source:function(e,t){t($.ui.autocomplete.filter(degreesAll,e.term).slice(0,10))},select:function(e,t){$(this).attr({label:t.item.shortTitle,"data-id":t.item.id,"data-shortTitle":t.item.shortTitle})}}),$(".degrees").each(function(e,t){var a=0,r=$(this).attr("data-id");if(void 0!==r){for(;a<degreesAll.length&&r!=degreesAll[a].id;++a);degreesAll[a]&&$(this).val(degreesAll[a].label)}else $(this).val("")})}function saveUserPic(){var e=new FormData,t=$('input[data-content="picture"]').get(0).files[0],a=Math.round(t.size/1024);"image/png"!=t.type&&"image/jpeg"!=t.type&&"image/jpg"!=t.type&&"image/PNG"!=t.type||(a<2048?(e.append("userId",userId),e.append("type","photo"),e.append("order_id",0),e.append("file",t),console.log(apiUrl+"/uploadFile",e),doUpload(apiUrl+"/uploadFile",e).then(function(e){console.log(e),"success"==e.status&&(localStorage.setItem(btoa("imageStore"),btoa(e.data.pic)),isProfilePictureUpdated=!0,resumeObj.pic=e.data.httpPath,localStorage.setItem(encrypt("userData",sessionId),encrypt(JSON.stringify(resumeObj),sessionId)),console.log(e.data.httpPath),$("#profileMenu img").attr("src",e.data.httpPath),$("#profilePicEdit").attr("src",e.data.httpPath),$("#pimage-preview").attr("src",e.data.httpPath),$("#pimage-preview2").css("background","url("+e.data.httpPath+") center center"),$("#image-preview2").css("opacity",0))})):($("#newErrorMessageID .message-text").html("Size exceeded. Max 2MB"),$("#newErrorMessageID").fadeIn().delay(3e3).fadeOut("slow",function(){})))}$(localDegrees).each(function(e,t){degreesAll.push({id:localDegrees[e].degreeId,label:localDegrees[e].title,value:localDegrees[e].title,shortTitle:localDegrees[e].shortTitle})}),$("#user-picture").on("change",function(){readFile2(this)});var base64Img,imgData=window.location.origin+"/assets/images/resume/watermarkworkruit.png";function readURL(e){var t=e.files[0],a=Math.round(t.size/1024),r=t.type.split("/")[1];if("png"==r||"jpg"==r||"PNG"==r||"jpeg"==r){if(a<2048&&e.files&&e.files[0]){var s=new FileReader;console.log("Show type of image: ",t.type.split("/")[1]),s.onload=function(e){$("#user_pic").attr("src",e.target.result)},s.readAsDataURL(e.files[0])}}else $("#newErrorMessageID .message-text").html("Image format not supported. Please upload JPG/JPEG/PNG formats."),$("#newErrorMessageID").fadeIn().delay(3e3).fadeOut("slow",function(){})}function toDataURL(e,t){var a=new XMLHttpRequest;a.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(a.response)},a.open("GET",e),a.responseType="blob",a.send()}function renderSvgImages(e,t){$("img.svg").each(function(){var a=jQuery(this),r=a.attr("id"),s=a.attr("class"),i=a.attr("src");jQuery.get(i,function(i){var n=jQuery(i).find("svg");void 0!==r&&(n=n.attr("id",r)),void 0!==s&&(console.log("inverse_color_icon",s.search("inverse_color_icon")),n=n.attr("class","font-10pt social_icon replaced-svg"),-1!=s.search("inverse_color_icon")&&(n=n.attr("class","font-10pt social_icon inverse_color_icon replaced-svg"))),!(n=n.removeAttr("xmlns:a")).attr("viewBox")&&n.attr("height")&&n.attr("width")&&n.attr("viewBox","0 0 "+n.attr("height")+" "+n.attr("width")),a.replaceWith(n),$(".social_icon").attr("fill",e),$(".social_icon.inverse_color_icon").attr("fill",t),$(".social_icon").attr("width","15px")},"xml")})}function ratingCircle(){$("#rating-container");var e=-1;$(".rating-circle").hover(function(){$(this).on("mouseleave"),$(this).removeClass("rating-chosen").addClass("rating-hover"),"template_7"!==$("#coverLetterTemplate").attr("data-coverLettertemplate")?($(this).prevAll().removeClass("rating-chosen").addClass("rating-hover").css("background",$(".selected-color").attr("data-color")),$(this).css("background",$(".selected-color").attr("data-color")),$(this).nextAll().removeClass("rating-chosen").css("background","#eee")):($(this).prevAll().removeClass("rating-chosen").addClass("rating-hover").css({background:"#fff",opacity:"100%"}),$(this).css({background:"#fff",opacity:"100%"}),$(this).nextAll().removeClass("rating-chosen").css({background:"#000",opacity:"10%"}))},function(){console.log("mouseleave"),"template_7"!==$("#coverLetterTemplate").attr("data-coverLettertemplate")?($(this).removeClass("rating-hover").css("background","#eee"),$(this).prevAll().removeClass("rating-hover").css("background","#eee")):($(this).removeClass("rating-hover").css({background:"#fff",opacity:"100%"}),$(this).prevAll().removeClass("rating-hover").css({background:"#fff",opacity:"100%"}));var e=!$(this).parent().parent().parent().attr("id").search("lang_"),t=e?$(this).parent().parent().parent().attr("id").split("lang_")[1]:$(this).parent().parent().parent().attr("id").split("skills_item_")[1];selectRatingCircle(t,parseInt($(this).parent().parent().attr("data-percentage")),e?"lang_details":"skills-item");$(this).parent().children().first()}),$(".rating-circle").click(function(){console.log("rating circle clicked"),"template_7"!==$("#coverLetterTemplate").attr("data-coverLettertemplate")?($(this).addClass("rating-chosen rating-clicked").css("background",$(".selected-color").attr("data-color")),$(this).prevAll().addClass("rating-chosen").css("background",$(".selected-color").attr("data-color"))):($(this).addClass("rating-chosen rating-clicked").css("background","#fff"),$(this).prevAll().addClass("rating-chosen").css("background","#fff")),e=$(this).index(),$(this).parent().parent().attr("data-percentage",25*(e+1))})}function selectRatingCircle(e,t,a){console.log("selectRatingCircle",{a:e,percentage:t,name:a});var r=$(".selected-color").attr("data-color");switch(t){case 25:"lang_details"===a&&("template_7"!==$("#coverLetterTemplate").attr("data-coverLettertemplate")?$("#lang_"+e+" .rating-container li:first").css("background",r).nextAll().css("background","#eee"):($("#lang_"+e+" .rating-container li").css({background:"#000",opacity:"10%"}),$("#lang_"+e+" .rating-container li:first").css({background:"#fff",opacity:"100%"}))),"skills-item"===a&&("template_7"!==$("#coverLetterTemplate").attr("data-coverLettertemplate")?$("#skills_item_"+e+" .rating-container li:first").css("background",r).nextAll().css("background","#eee"):($("#skills_item_"+e+" .rating-container li").css({background:"#000",opacity:"10%"}),$("#skills_item_"+e+" .rating-container li:first").css({background:"#fff",opacity:"100%"})));break;case 50:"lang_details"===a&&("template_7"!==$("#coverLetterTemplate").attr("data-coverLettertemplate")?$("#lang_"+e+" .rating-container li").eq(2).prevAll().css("background",r):($("#lang_"+e+" .rating-container li").css({background:"#000",opacity:"10%"}),$("#lang_"+e+" .rating-container li").eq(2).prevAll().css({background:"#fff",opacity:"100%"}))),"skills-item"===a&&("template_7"!==$("#coverLetterTemplate").attr("data-coverLettertemplate")?$("#skills_item_"+e+" .rating-container li").eq(2).prevAll().css("background",r):($("#skills_item_"+e+" .rating-container li").css({background:"#000",opacity:"10%"}),$("#skills_item_"+e+" .rating-container li").eq(2).prevAll().css({background:"#fff",opacity:"100%"})));break;case 75:"lang_details"===a&&("template_7"!==$("#coverLetterTemplate").attr("data-coverLettertemplate")?$("#lang_"+e+" .rating-container li").eq(3).prevAll().css("background",r):($("#lang_"+e+" .rating-container li").css({background:"#000",opacity:"10%"}),$("#lang_"+e+" .rating-container li").eq(3).prevAll().css({background:"#fff",opacity:"100%"}))),"skills-item"===a&&(console.log("selectRatingCircle",e,t,a),"template_7"!==$("#coverLetterTemplate").attr("data-coverLettertemplate")?$("#skills_item_"+e+" .rating-container li").eq(3).prevAll().css("background",r):($("#skills_item_"+e+" .rating-container li").css({background:"#000",opacity:"10%"}),$("#skills_item_"+e+" .rating-container li").eq(3).prevAll().css({background:"#fff",opacity:"100%"})));break;case 100:"lang_details"===a&&("template_7"!==$("#coverLetterTemplate").attr("data-coverLettertemplate")?$("#lang_"+e+" .rating-container li").css("background",r):$("#lang_"+e+" .rating-container li").css({background:"#fff",opacity:"100%"})),"skills-item"===a&&("template_7"!==$("#coverLetterTemplate").attr("data-coverLettertemplate")?$("#skills_item_"+e+" .rating-container li").css("background",r):$("#skills_item_"+e+" .rating-container li").css({background:"#fff",opacity:"100%"}))}}function downloadResumeAction(e,t){fetch(e).then(e=>e.blob()).then(e=>{var a=new FileReader;a.readAsDataURL(e),a.onloadend=function(){if(base64data=a.result.replace("application/pdf","binary/octet-stream"),navigator.msSaveBlob)window.navigator.msSaveOrOpenBlob(e,t+".pdf");else{var r=document.createElement("a");r.href=base64data,r.download=t+".pdf",r.dispatchEvent(new MouseEvent("click"))}$(".editorNav li,  .previewNav li").removeClass("inactive-link"),$("#downloadResume img").attr("src","../../../assets/images/resume/eva-svg/cloud-download.svg"),analytics.logEvent("wirw_downloadresume")}})}function uploadTemplatePdf(e,t){e.pic=resumeObj.pic;var a=new FormData,r=new Blob([getHtmlForUpload(e.template)]);a.append("type","html"),a.append("userId",userId),a.append("file",r,userId+"_preview.html"),a.append("template",getTemplateOptionId(e.template)),a.append("file",r,userId+"_preview.html"),a.append("order_id",0),doUpload(apiUrl+"/uploadFileV1",a).then(a=>{a&&"success"==a.status?saveUserData(e,t):($(".loading-container").fadeOut(),$("#newErrorMessageID .message-text").html("Something went wrong please try again"),$("#newErrorMessageID").fadeIn().delay(2e3).fadeOut("slow",function(){$("#saveResume").removeAttr("pointer-events")}),"save"===t&&($("#saveResume img").attr("src","../../../assets/images/resume/eva-svg/save.svg"),$(".editorNav li,  .previewNav li").removeClass("inactive-link"),$(".resume-preview").addClass("d-none"),$(".url_link").each(function(e){var t=$(this).text();validURL(t)&&(-1!=t.search("https://")?$(this).attr("href",$(this).text()).attr("target","_blank").attr("contenteditable","true"):$(this).attr("href","https://"+t).attr("target","_blank").attr("contenteditable","true"))})),"download"===t&&($(".editorNav li,  .previewNav li").removeClass("inactive-link"),$("#downloadResume img").attr("src","../../../assets/images/resume/eva-svg/cloud-download.svg"),$(".resume-preview").addClass("d-none")))})}function getTemplateOptionId(e){switch(e){case"template_1":return"template_1_page_options";case"template_2":return"template_2_page_options";case"template_3":return"template_3_page_options";case"template_4":return"template_4_page_options";case"template_5":return"template_5_page_options";case"template_6":return"template_6_page_options";case"template_7":return"template_7_page_options";case"template_8":return"template_8_page_options";case"template_9":return"template_9_page_options";case"template_10":return"template_10_page_options";default:return"template_1_page_options"}}toDataURL(imgData,function(e){base64Img=e}),$(window).bind("keydown",function(e){if(e.ctrlKey||e.metaKey)switch(String.fromCharCode(e.which).toLowerCase()){case"s":e.preventDefault(),$("#saveResume").trigger("click");break;case"d":e.preventDefault(),$("#downloadResume").trigger("click");break;case"b":e.preventDefault(),loadPage("#home",!0);break;case"e":e.preventDefault(),loadPage("app/dashboard/coverletters.html",!0)}});